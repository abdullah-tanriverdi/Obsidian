#Yazılım #Java 


![[JNI1.png]]

- JNI (Java Native Interface), Java kodunun C, C++ veya Assembly gibi yerel (native) dillerle yazılmış kodlarla karşılıklı iletişim kurmasını sağlayan bir API’dir.
    
- Java uygulamaları, JVM üzerinde çalışır; ancak JNI ile işletim sistemi seviyesindeki kütüphanelere ve donanım bağımlı özelliklere erişebilir.


**Neden JNI Kullanılır?**

- **Performans**: Kritik kod parçalarını C/C++ ile daha hızlı çalıştırmak.
    
- **Mevcut Kütüphaneleri Kullanmak**: Java’da yazılmamış (C/C++ ile yazılmış) kütüphaneleri kullanmak.
    
- **Donanım Erişimi**: İşletim sistemi API’lerine ve donanım sürücülerine erişim sağlamak.
    
- **Platforma Özgü İşlevler**: Java’nın standart kütüphanelerinde olmayan işlevleri eklemek.


**JNI Mimarisi**

```java
Java Kod (JVM)
    ↓  (JNI Çağrısı)
JNI API
    ↓
Native Kod (C/C++)
    ↓
İşletim Sistemi / Donanım

```

**Temel Bileşenler:**

1. **Java Sınıfı** → `native` anahtar kelimesi ile bildirilmiş metodlar.
    
2. **Header Dosyası (.h)** → `javac` ve `javac -h` ile üretilir.
    
3. **C/C++ Kod (.c / .cpp)** → Native metodların gerçek implementasyonu.
    
4. **Paylaşımlı Kütüphane (.dll / .so / .dylib)** → Java tarafından yüklenir (`System.loadLibrary`).

**JNI ile Adım Adım Çalışma**

- **Java Tarafı - Native Metod Tanımı**
```java
public class MyJNI {
    // Native metod bildirimi
    public native void helloFromC();

    static {
        // Kütüphaneyi yükle
        System.loadLibrary("myjni");
    }

    public static void main(String[] args) {
        new MyJNI().helloFromC();
    }
}

```

- **Header Dosyası Oluşturma**
Terminal
```bash
javac MyJNI.java
javac -h . MyJNI.java

```
Bu işlem MyJNI.h dosyasını üretir.

- **C/C++ Tarafı - Metodu Gerçekleştirme**
```c
#include <jni.h>
#include <stdio.h>
#include "MyJNI.h"

JNIEXPORT void JNICALL Java_MyJNI_helloFromC(JNIEnv *env, jobject obj) {
    printf("C tarafindan merhaba!\n");
}

```

- **Paylaşımlı Kütüphane Derleme**
Linux/Mac
```bash
gcc -I"$JAVA_HOME/include" -I"$JAVA_HOME/include/linux" -shared -fpic MyJNI.c -o libmyjni.so

```

Windows
```bash
gcc -I"%JAVA_HOME%\include" -I"%JAVA_HOME%\include\win32" -shared -o myjni.dll MyJNI.c

```

- **Çalıştırma**
```bash
java MyJNI

```
Çıktı:
```mathematica  
C tarafindan merhaba!

```

**Dikkat Edilmesi Gerekenler**

- **Bellek Yönetimi**: JNI, Java’nın otomatik GC’sinden bağımsız çalışır; native tarafta ayırdığınız belleği siz serbest bırakmalısınız.
    
- **Platform Bağımlılığı**: Yazılan native kod, hedef işletim sistemi için derlenmelidir.
    
- **Güvenlik**: JNI ile JVM dışına çıkıldığında güvenlik açıkları oluşabilir.
    
- **Hata Yönetimi**: Native kod hataları JVM’i çökertebilir.

<iframe
  width="560" height="315"
  src="https://www.youtube.com/embed/N7ViTwn682k"
  title="YouTube video player"
  frameborder="0"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
  allowfullscreen>
</iframe>


***

***Abdullah TANRIVERDİ***